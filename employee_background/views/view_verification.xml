<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="employee_disciplinary_tree" model="ir.ui.view">
            <field name="name">employee.verification.tree</field>
            <field name="model">employee.verification</field>
            <field name="arch" type="xml">
                <tree string="Employee Verification">
                    <field name ="verification_id"/>
                    <field name ="employee"/>
                    <field name ="agency"/>
                </tree>
            </field>
        </record>

        <record id="employee_disciplinary_form" model="ir.ui.view">
            <field name="name">employee.verification.form</field>
            <field name="model">employee.verification</field>
            <field name="arch" type="xml">
                <form string="Employee Verification">
                     <header>
                         <field name="state" widget="statusbar"/>
                         <button string="Assign to agency" groups="hr.group_hr_manager" type="object" name="assign_statusbar" class="oe_highlight" attrs="{'invisible': [('state', '!=', 'draft')]}"/>
                         <button string="Approve" groups="hr.group_hr_manager" type="object" name="approve_statusbar" class="oe_highlight" attrs="{'invisible': [('state', '!=', 'submit')]}"/>
                         <button string="Refuse" groups="hr.group_hr_manager" type="object" name="refused_statusbar" class="oe_highlight" attrs="{'invisible': [('state', '!=', 'submit')]}"/>
                         <button string="Upload Details" groups="employee_background.group_hr_agent" type="object" name="upload_statusbar" class="oe_highlight" attrs="{'invisible': [('state', '!=', 'assign')]}"/>
                         <button string="Submit to Manager" groups="employee_background.group_hr_agent"  type="object" name="submit_statusbar" class="oe_highlight" attrs="{'invisible': [('state', '!=', 'ready')]}"/>
                         <button string="Submit Expense" groups="employee_background.group_hr_agent" type="object" name="create_invoice_agency" class="oe_highlight" attrs="{'invisible': [('state', '!=', 'submit')]}"/>
                         <button string="Send Email" name="send_mail" type="object" class="oe_highlight" attrs="{'invisible': ['|',('state','!=','approve'),('field_check','!=',False)]}"/>
                         <button string="Send Email" name="reject_mail" type="object" class="oe_highlight" attrs="{'invisible': ['|',('state','!=','refuse'),('field_check','!=',False)]}"/>

                     </header>
                    <sheet>
                        <group>
                            <field name ="verification_id"/>
                            <field name ="employee"/>
                            <field name ="address"/>
                            <field name ="agency"/>
                            <field name="assigned_by"/>
                            <field name ="required_details" invisible="1"/>
                            <field name ="resume_applicant" attrs="{'invisible': ['&amp;',('state','=','ready'), ('state','=','submit')]}"/>
                            <field name ="upload_result" widget="many2many_binary" class="oe_inline" attrs="{'invisible': ['|',('state','=','draft'),('state','=','assign')]}"/>
                            <field name ="field_check" invisible="1"/>
                        </group>
                    </sheet>

                </form>
            </field>
        </record>



        <!--Sequence id for employee verification-->
        <record id="seq_ver_employee" model="ir.sequence">
            <field name="name">omega_sequencer</field>
            <field name="code">res.users</field>
            <field name="prefix">EV</field>
            <field name="padding">6</field>
        </record>

        <!--Actions for menu items-->
        <record id="action_employee_verification" model="ir.actions.act_window">
           <field name="name">Employee Verification Creation</field>
           <field name="res_model">employee.verification</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[['state','=','draft']]</field>
        </record>

        <record id="assigned_employee_verification" model="ir.actions.act_window">
            <field name="name">Assigned Verification</field>
            <field name="res_model">employee.verification</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[['state','=','assign']]</field>
        </record>

         <record id="submitted_employee_verification" model="ir.actions.act_window">
            <field name="name">Submitted Verification</field>
            <field name="res_model">employee.verification</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[['state','=','submit']]</field>
        </record>

         <record id="approved_employee_verification" model="ir.actions.act_window">
            <field name="name">Approved Verification</field>
            <field name="res_model">employee.verification</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[['state','=','approve']]</field>
        </record>

         <record id="refused_employee_verification" model="ir.actions.act_window">
            <field name="name">Refused Verification</field>
            <field name="res_model">employee.verification</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[['state','=','refuse']]</field>
        </record>

        <!--Different menu item for employee verification-->
         <menuitem id="employee_verification_menu" name="Employee Verification" parent="hr.menu_hr_root"
                    sequence=""/>
         <menuitem id="employee_verification_create" action="action_employee_verification"  groups="hr.group_hr_manager" name="Create verification" parent="employee_verification_menu"
                    sequence=""/>
         <menuitem id="employee_verification_assign" action="assigned_employee_verification"  groups="employee_background.group_hr_agent,hr.group_hr_manager" name="Assigned verifications" parent="employee_verification_menu"
                    sequence=""/>
         <menuitem id="employee_verification_submit" action="submitted_employee_verification"  groups="employee_background.group_hr_agent,hr.group_hr_manager" name="Submitted verifications" parent="employee_verification_menu"
                    sequence=""/>
         <menuitem id="employee_verification_approve" action="approved_employee_verification"  groups="hr.group_hr_manager" name="Approved verifications" parent="employee_verification_menu"
                    sequence=""/>
         <menuitem id="employee_verification_refuse" action="refused_employee_verification"  groups="hr.group_hr_manager" name="Refused verifications" parent="employee_verification_menu"
                    sequence=""/>
    </data>
</odoo>
